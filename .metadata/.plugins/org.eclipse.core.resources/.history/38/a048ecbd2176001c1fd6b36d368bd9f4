package db.query;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

import lombok.Data;

@Data
public class QueryParser {

	private String query;

	public QueryParser(String s) {
		this.query = s;
	}

	public String whatType(String query) {
//		String regex = "^select\\s+(.*?)\\s+from\\s+(.*?)";
//		String regex2 = "^\\s*select\\s+(.*?)\\s+from\\s+(.*?)(?:\\s+(?:where)\\s+(.*?))?$";
//		Pattern selectPattern = Pattern.compile(regex2,Pattern.CASE_INSENSITIVE);
//		Matcher selectMatcher = selectPattern.matcher(query);
		
        Pattern selectPattern = Pattern.compile("^\\s*select\\s+(.*?)\\s+from\\s+(.*?)(?:\\s+(?:where)\\s+(.*?))?$", Pattern.CASE_INSENSITIVE);
        Matcher selectMatcher = selectPattern.matcher(query);
		
		if(selectMatcher.group(1).toLowerCase()=="select") {
			return "OK";
		}else {
			return "fail";
		}
	}

	
}
